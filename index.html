<html>
  <head>
    <title>File upload Node.</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.form/3.51/jquery.form.min.js"></script>
    <script  src='./html/voicerss-tts.min.js'></script>
  </head>
  <body>
      <form id="uploadForm"
          enctype="multipart/form-data"
          action="/api/photo"
          method="post">
      <input type="file" name="userPhoto" />
      <input type="submit" value="Upload Image" name="submit">
    </form>
    <header id = "title"></header>
    <span id = "status"></span>
  </body>
  <button id= "audioButton" onclick="speak()">TTS</button>
  <script>
  function speak(){
        VoiceRSS.speech({
            key: 'b49727a235b54b15a7b22955f9fbd2d6',
            src: 'Hello, world!',
            hl: 'en-us',
            r: 0, 
            c: 'mp3',
            f: '44khz_16bit_stereo',
            ssml: false
        });
      }; 
  $(document).ready(function() {

     $('#uploadForm').submit(function() {
		 $("#title").empty().text("Nothing is found yet...");
     $("#status").empty().text("File is uploading...");

        $(this).ajaxSubmit({

            error: function(xhr) {
		            status('Error: ' + xhr.status);
            },

            success: function(response) {
					      //console.log(response)
					      var jsonresp = JSON.parse(response);
                //console.log(jsonresp)
                $("#title").empty().text(jsonresp.place);
                $("#status").empty().text(jsonresp.description);
            }
	});

	return false;
    });    
});
  </script>
</html>
